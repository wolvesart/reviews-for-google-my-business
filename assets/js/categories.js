document.addEventListener("DOMContentLoaded",function(){if("undefined"!=typeof wgmbrManage){var e=document.getElementById("gmb-create-category-btn"),n=document.getElementById("gmb-new-category-name");e&&n&&(e.addEventListener("click",function(){var t=n.value.trim();t?(e.disabled=!0,e.textContent=wgmbrManage.i18n.creating,fetch(wgmbrManage.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"wgmbr_create_category",category_name:t,nonce:wgmbrManage.nonce})}).then(function(e){return e.json()}).then(function(n){var t;n.success?window.location.reload():(alert(wgmbrManage.i18n.error+" "+((null===(t=n.data)||void 0===t?void 0:t.message)||wgmbrManage.i18n.unknownError)),e.disabled=!1,e.textContent=wgmbrManage.i18n.createCategory)}).catch(function(n){alert(wgmbrManage.i18n.networkError+" "+n.message),e.disabled=!1,e.textContent=wgmbrManage.i18n.createCategory})):alert(wgmbrManage.i18n.enterCategoryName)}),n.addEventListener("keypress",function(n){"Enter"===n.key&&e.click()})),document.querySelectorAll(".gmb-delete-category-btn").forEach(function(e){e.addEventListener("click",function(){var e=this,n=this.dataset.categoryId;confirm(wgmbrManage.i18n.confirmDeleteCategory)&&(this.disabled=!0,this.textContent=wgmbrManage.i18n.deleting,fetch(wgmbrManage.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"wgmbr_delete_category",category_id:n,nonce:wgmbrManage.nonce})}).then(function(e){return e.json()}).then(function(n){var t;n.success?window.location.reload():(alert(wgmbrManage.i18n.error+" "+((null===(t=n.data)||void 0===t?void 0:t.message)||wgmbrManage.i18n.unknownError)),e.disabled=!1,e.textContent=wgmbrManage.i18n.delete)}).catch(function(n){alert(wgmbrManage.i18n.networkError+" "+n.message),e.disabled=!1,e.textContent=wgmbrManage.i18n.delete}))})})}});